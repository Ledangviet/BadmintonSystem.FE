<div class="chat-widget">
    <button class="chat-button" (click)="toggleChat()">
        <img class="chat-bot-icon" src="https://vietle.blob.core.windows.net/badminton/chatbot.png" alt="User Avatar" />
    </button>

    @if(isOpen ){
    <div class="chat-container" [@chatOpen]>
        <section>
            <div class="">
                <div class="row d-flex justify-content-center">
                    <div  class="main-chat">
                        <div class="card-header align-items-center">
                            <h5 class="mb-0">Trợ lí AI</h5>
                        </div>
                        <div class="card" id="chat-bot-body">
                            @for(chat of listMessage; track chat){
                            <div class="chat-body">
                                @if(chat.message != ""){

                                    <div class="chat-message right" [class.hidden-chat]="false">

                                        <div class="message-content">
                                            <div>{{chat.message}}</div>
                                        </div>
                                        <img src="https://vietle.blob.core.windows.net/badminton/UserIcon.png"
                                        alt="User Avatar" />
                                    </div>
                                }
                                <div class="chat-message left" [class.hidden-chat]="false">
                                    <img src="https://vietle.blob.core.windows.net/badminton/UserIcon.png"
                                    alt="User Avatar" />
                                    <div class="message-content">
                                        @for(response of chat.response; track response){
                                            <div>{{response}}</div>
                                        }
                                        @if(chat.link){
                                            <a [href]="chat.link" target="_blank">Mã thanh toán</a>
                                        }                                     
                                    </div>
                                </div>
                                
                            </div>
                            }                            
                        </div>
                        <div class="chat-footer">
                            <img src="https://vietle.blob.core.windows.net/badminton/UserIcon.png"
                                alt="User Avatar" />
                            <input #inputMess type="text" [(ngModel)]="newMessage" placeholder="Type message..."
                                class="chat-input" (keydown.enter)="sendMessage()"/>
                            <button class="send-button" (click)="sendMessage()">
                                <mat-icon>send</mat-icon>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </div>
    }
</div>